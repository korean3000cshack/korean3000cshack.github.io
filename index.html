<!DOCTYPE html>
<!--
	Massively by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
  <head>
    <title>DJ Lil Mia</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=no"
    />
    <link rel="stylesheet" href="assets/css/main.css" />
    <link rel="stylesheet" href="assets/css/date-picker.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    />

    <noscript
      ><link rel="stylesheet" href="assets/css/noscript.css"
    /></noscript>
  </head>
  <body class="is-preload">
    <!-- Wrapper -->
    <div id="wrapper" class="fade-in">
      <div class="nav">
        <a href="#" class="logo-btn">
          <img src="images/logo.png" alt="DJ Lil Mia Logo" class="nav-logo" />
        </a>
        <input type="checkbox" id="nav-check" />
        <div class="nav-header"></div>
        <div class="nav-btn">
          <label for="nav-check">
            <span></span>
            <span></span>
            <span></span>
          </label>
        </div>

        <div class="nav-links">
          <a class="nav-button" href="#">HOME</a>
          <a class="nav-button" href="#about">ABOUT</a>
          <a class="nav-button" href="#service">SERVICES</a>
          <a class="nav-button" id="bookNow" href="#book">BOOK NOW</a>
        </div>
      </div>

      <!-- Intro -->
      <div id="intro">
        <!-- <p>DJ Lil Mia</p> -->
        <span>DJ Lil Mia</span>
        <div class="dark-overlay"></div>
      </div>

      <!-- Main -->
      <div id="main">
        <!-- Featured Post -->
        <article id="about" class="post">
          <div class="half">
            <a class="image main"><img src="images/pic01.jpg" alt="" /></a>
          </div>
          <div class="half">
            <header class="major">
              <h2 id="aboutUs">ABOUT US</h2>
              <p>
                DJ Lil Mia brings the perfect soundtrack to weddings, parties,
                and events of all kinds. Known for reading the crowd and keeping
                the energy high, every set is custom-tailored to your vibe.
              </p>
            </header>
          </div>
        </article>

        <!-- Posts -->
        <header id="service" class="major">
          <h2>OUR SERVICES</h2>
        </header>
        <section class="posts">
          <article>
            <a class="image fit"
              ><img id="weddings" src="images/pic02.jpg" alt=""
            /></a>
            <header>
              <h2>Weddings</h2>
            </header>
          </article>
          <article>
            <a class="image fit"
              ><img id="parties" src="images/pic04.JPG" alt=""
            /></a>
            <header>
              <h2>PARTIES</h2>
            </header>
          </article>
          <article>
            <a class="image fit"
              ><img id="events" src="images/pic03.jpg" alt=""
            /></a>
            <header>
              <h2>EVENTS</h2>
            </header>
          </article>
        </section>
        <h3 style="padding-top: 0">AND MORE!</h3>
      </div>

      <!-- Footer -->
      <div id="book">
        <div class="half">
          <h1>BOOK uS!</h1>
          <h6>We look forward to work with you!</h6>
        </div>
        <div class="half">
          <form id="contact-form" method="post" action="#">
            <div class="fields">
              <div class="field" style="display: flex; gap: 1rem">
                <div class="half">
                  <label class="label" for="fname">First Name</label>
                  <input type="text" name="fname" id="fname" />
                </div>
                <div class="half">
                  <label class="label" for="lname">Last Name</label>
                  <input type="text" name="lname" id="lname" />
                </div>
              </div>

              <div class="date-time-field">
                <div id="date-half" class="half">
                  <div
                    class="picker-button"
                    id="default-today"
                    data-picker-type="date"
                    data-days-forward="90"
                    data-days-back="0"
                    data-default-today="true"
                  >
                    <label class="label">Event Date</label>
                    <div class="date-box">
                      <span class="field picker-value">Select Date</span>
                      <span class="picker-icon material-icons">date_range</span>
                    </div>
                  </div>
                </div>
                <div class="half">
                  <div
                    class="picker-button"
                    id="date-time-time"
                    data-picker-type="time"
                    data-time-interval="15"
                    data-start-time="00:00"
                    data-end-time="23:45"
                    data-allow-past-times="false"
                    data-linked-to="date-time"
                    data-start-time="now"
                  >
                    <label class="label">Event Date</label>
                    <div class="date-box">
                      <span class="picker-value">Select Time</span>
                      <span class="picker-icon material-icons"
                        >access_time</span
                      >
                    </div>
                  </div>
                </div>
              </div>
              <div class="field">
                <label for="phone">Phone</label>
                <input
                  type="number"
                  id="phone"
                  placeholder="123-456-7890"
                  name="phone"
                />
              </div>
              <div class="field">
                <label for="email">Email</label>
                <input
                  type="text"
                  name="email"
                  id="email"
                  placeholder="email@website.site"
                />
              </div>
              <div class="field">
                <label for="event-address">Event Address</label>
                <input
                  type="text"
                  name="address"
                  id="address"
                  placeholder="123 Main St, City, Province"
                />
              </div>
              <div class="field">
                <label for="num-people"
                  >Estimate # of attendees at the event</label
                >
                <input
                  type="number"
                  name="num-people"
                  id="num-people"
                  pattern="^[1-9][0-9]*"
                />
              </div>

              <div class="field">
                <label>Do you need audio equipment?</label>
                <label class="radio-wrapper">
                  <input id="audio-yes" type="radio" name="audio" value="yes" />
                  <span class="custom-radio"></span>
                  Yes
                </label>
                <br />
                <label class="radio-wrapper">
                  <input id="audio-no" type="radio" name="audio" value="no" />
                  <span class="custom-radio"></span>
                  No
                </label>
              </div>
              <div class="field">
                <label for="message"
                  >Specific requirements or pereferences</label
                >
                <textarea name="message" id="message" rows="3"></textarea>
              </div>
            </div>
            <input type="submit" value="Submit" />
            <div class="form-footer">
              <p id="error-msg" class="error-msg"></p>
            </div>
          </form>
          <div>
            <p class="quotation">
              We will provide you with a quotation as soon as we receive the
              form!
            </p>
          </div>
        </div>
      </div>

      <div id="picker-backdrop" class="picker-backdrop"></div>
      <div id="date-picker" class="date-picker">
        <div class="date-picker-header">
          <div class="days-of-week">
            <span>M</span><span>T</span><span>W</span> <span>T</span
            ><span>F</span><span>S</span><span>S</span>
          </div>
        </div>
        <div id="date-picker-months" class="date-picker-months"></div>
      </div>
      <div id="time-picker" class="time-picker"></div>

      <footer class="footer">
        <div class="footer-content">
          <!-- Logo -->
          <div class="footer-logo">
            <img id="footer-logo" src="images/logo.png" alt="Lil M Logo" />
          </div>

          <!-- Info Columns -->
          <div class="footer-columns">
            <div class="footer-column">
              <h5>Based in</h5>
              <p>Toronto, ON,<br />Canada</p>
            </div>

            <div class="footer-column">
              <h5>Contact us!</h5>
              <p>
                (437) 595-1171<br /><a href="mailto:lilmia.dj@gmail.com"
                  >lilmia.dj@gmail.com</a
                >
              </p>
            </div>

            <div class="footer-column">
              <h5>Follow us!</h5>
              <div class="social-icons">
                <a href="#">
                  <img
                    class="social-icon"
                    src="images/instagram.svg"
                    alt="Instagram"
                  />
                </a>
              </div>
              <!-- Copyright -->
              <div id="copyright">
                <ul>
                  <li><a href="credits.html">credits</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </footer>
    </div>

    <script>
      const form = document.getElementById("contact-form");

      form.addEventListener("submit", async (event) => {
        event.preventDefault(); // Prevent the page from reloading

        // Collect form data
        const data = {
          name: form.fname.value,
          email: form.email.value,
          message: form.message.value,
          lname: form.lname.value,
          date: document.querySelector("#default-today .picker-value")
            .textContent,
          time: document.querySelector("#date-time-time .picker-value")
            .textContent,
          phone: form.phone.value,
          address: form.address.value,
          numPeople: form["num-people"].value,
          audio: form.audio.value,
        };

        let valid = true;

        // Helper to set border color
        function setInvalid(input) {
          console.log("Invalid input:", input);
          input.style.border = "1px solid red";
          valid = false;
        }
        function setValid(input) {
          input.style.border = "1px solid black";
        }

        // First Name
        if (!data.name.trim()) setInvalid(form.fname);
        else setValid(form.fname);

        // Last Name
        if (!data.lname.trim()) setInvalid(form.lname);
        else setValid(form.lname);

        // Email
        const emailPattern =
          /^[a-zA-Z0-9]+(?:\.[a-zA-Z0-9]+)*@[a-zA-Z0-9]+(?:\.[a-zA-Z0-9]+)*$/;
        if (!emailPattern.test(data.email.trim())) setInvalid(form.email);
        else setValid(form.email);

        // Phone
        const phonePattern = /^[0-9]{3}-[0-9]{3}-[0-9]{4}$/;
        const phonePattern2 = /^[0-9]{10}$/; // Allow 10 digits without dashes
        if (
          !phonePattern.test(data.phone.trim()) &&
          !phonePattern2.test(data.phone.trim())
        )
          setInvalid(form.phone);
        else setValid(form.phone);

        // Date
        const datePicker = document.querySelector(
          "#default-today .picker-value"
        );
        if (datePicker.textContent === "Select Date")
          setInvalid(document.querySelector("#default-today .date-box"));
        else setValid(document.querySelector("#default-today .date-box"));

        // Time
        const timePicker = document.querySelector(
          "#date-time-time .picker-value"
        );

        if (timePicker.textContent === "Select Time")
          setInvalid(document.querySelector("#date-time-time .date-box"));
        else setValid(document.querySelector("#date-time-time .date-box"));

        // Address
        if (!data.address.trim()) setInvalid(form.address);
        else setValid(form.address);

        // Number of People
        const numPeople = parseInt(data.numPeople, 10);
        if (isNaN(numPeople) || numPeople <= 0) setInvalid(form["num-people"]);
        else setValid(form["num-people"]);

        const audio = document.getElementsByClassName("custom-radio");
        // Audio Equipment
        if (!data.audio) {
          for (const wrapper of audio) {
            setInvalid(wrapper);
          }
        } else {
          for (const wrapper of audio) {
            setValid(wrapper);
          }
        }

        // If any validation failed, stop here
        if (!valid) {
          document.getElementById("error-msg").textContent =
            "Please fill out all required fields correctly.";
          return;
        } else {
          document.getElementById("error-msg").textContent = "";
        }

        alert(
          `First Name: ${data.name}
        Last Name: ${data.lname}
        Email: ${data.email}
        Phone: ${data.phone}
        Date: ${data.date}
        Time: ${data.time}
        Address: ${data.address}
        Number of People: ${data.numPeople}
        Audio Equipment: ${data.audio}
        Message: ${data.message}`
        );

        // try {
        //   const response = await fetch("/api/email", {
        //     // Replace with your function URL if deployed elsewhere
        //     method: "POST",
        //     headers: { "Content-Type": "application/json" },
        //     body: JSON.stringify(data),
        //   });

        //   if (response.ok) {
        //     alert("Message sent successfully!");
        //     form.reset(); // Clear form fields
        //   } else {
        //     alert("Failed to send message. Please try again.");
        //   }
        // } catch (error) {
        //   alert(
        //     "Error sending message. Please check your internet connection."
        //   );
        //   console.error(error);
        // }
      });
    </script>

    <!-- Scripts -->
    <script src="assets/js/date-picker.js" defer></script>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.scrollex.min.js"></script>
    <script src="assets/js/jquery.scrolly.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>
  </body>
</html>
